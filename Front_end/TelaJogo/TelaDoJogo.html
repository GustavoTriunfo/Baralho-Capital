<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Baralho Capital</title>
  <link rel="icon" type="image/png" href="/Baralho_Capital/esfera armilar.png">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/Baralho_Capital/Front_end/TelaJogo/styleTelaJogo.css">
</head>
<body>

  <div class="endgamePlayerLose" id="endgamePlayerLose">
    <img src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/playerLose.png" alt="Imagem derrota" id="imagemDerrota" style="width: 250px; height: auto; position: fixed; left: 60px; top: 120px;">
  </div>

  <div class="susto-overlay" id="sustoOverlay">
    <img src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/AtaqueSusto.png" alt="Imagem de Susto" id="imagemSusto">
    <div class="fundo-preto" id="fundoPreto"></div>
</div>


  <div class="vida-jogador-overlay" id="vidaJogadorOverlay"></div>


  <div class="overlayLoucura" id="overlayLoucura">
    <img src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/crazy01.gif" alt="Imagem 1">
    <img src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/crazy02.gif" alt="Imagem 2">
    <img src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/crazy03.gif" alt="Imagem 3">
    <img src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/crazy04.gif" alt="Imagem 4">
    <img src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/crazy05.gif" alt="Imagem 5">
  </div>

  <div class="landscape-warning">
    Por favor, gire seu dispositivo para o modo retrato.
  </div>

  <div class="overlay-transition-boss" style="display: none;"></div>

  <div class="black-overlay" style="display: none;">
    <div class="inner-black-div">
      <div class="square"></div>
    </div>
    <div class="control-buttons">
        <button id="move-up">↑</button>
        <button id="move-left">←</button>
        <button id="move-down">↓</button>
        <button id="move-right">→</button>
     
    </div>
  </div>
  

  <div class="progress" style="height: 30px; border-radius: 0px;">
    <div id="bossHealthBar" class="progress-bar bg-danger" role="progressbar" style="width: 100%;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
  </div>


  <div id="cardPreviewOverlay" class="card-preview-overlay d-none">
    <button id="botaoDevolver" class="btn btn-custom-primary">Devolver</button>
    <button id="botaoJogar" class="btn btn-custom-secondary">Jogar</button>
  </div>


  <div id="opponentCardPreviewOverlay" class="boss-card-preview-overlay d-none">
    <button id="botaoFechar" class="btn btn-boss-custom-primary" onclick="fecharvisualizacaoCartaBoss()">Fechar</button>
  </div>

  
  



    <div class="black-bg">
      <img id="mosquitoNotes" src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoSinging.gif" alt="mosquito notes">
        <!-- Fundo preto sólido -->
        <img style="display: block; position: fixed; top: -10px; left: -10px; width: 80px; z-index: 99;" id="iconeBoss" src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/Boss.gif" />
        <img style="display: none; position: fixed; top: 70px; right: 145px; width: 40px; z-index: 99;" id="raiva" src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/angry2.gif" />
        <img style="display: none; position: fixed; top: 10px; right: 55px; width: 80px;" id="risada" src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/haha.gif" />
        <img id="animatedImage" src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoDengue.png" />
        <div class="opponent-cards">
          
          </div>
      </div>

      <div id="tempo-restante-div" class="d-none" style="position: fixed; top: 420px;">
        <p id="tempo-restante" class="text-white text-center font-weight-bold" style="white-space: nowrap; font-size: 18px;">Aguardando Adversário: 16 segundos...</p>
        <img src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/loading2.gif" style="width: 50px; height: auto; display: block; margin: 0 auto;">
      </div>

      <div id="tempo-minigame-div" class="d-none" style="position: fixed; top: 50px;">
        <p id="tempo-minigame" class="text-white text-center font-weight-bold" style="white-space: nowrap; font-size: 18px;">Tempo restante: 16s...</p>
      </div>

      <div id="tempo-missao-div" class="d-none">
        <p id="tempo-missao" class="text-white font-weight-bold" style="white-space: nowrap; font-size: 18px; position: fixed; top: -20px; left: 30px; z-index: 5;"></p>
      </div>
      
     
      
      <div class="bg-image">

        <img id="imagemBaralho" src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/baralho_na_mesa.png" alt="Baralho" style="pointer-events: none;">
        
       
        <div class="card-holder" id="maoJogador" style="pointer-events: 'none';">
          <img src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/left hand.png" class="player-hand-image left" id="hand-left">
        
          <img src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/right hand.png" class="player-hand-image right" id="hand-right">
        </div>

        <div id="statusMenu" class="status-menu bg-light p-4 rounded" style="display: none; z-index: 9999;">
          <!-- Botão para fechar o menu de status -->
          <button class="close-btn btn btn-sm btn-danger" onclick="fecharMenuStatus()">Fechar</button>
          <!-- Conteúdo do menu de status -->
          <h2 class="text-center mb-4">Status do Jogador</h2>
          <div class="status-info">
            <p class="mb-2"><strong>Nome:</strong> <span id="nomeJogador" class="text-primary">Nome do Jogador</span></p>
            <p class="mb-2"><strong>Dinheiro:</strong> <span id="dinheiroJogador" class="text-success"></span></p>
            <p class="mb-2"><strong>INV:</strong> <span id="investimentoJogador" class="text-info"></span></p>
            <p class="mb-2"><strong>FM:</strong> <span id="famaJogador" class="text-info"></span></p>
            <p class="mb-2"><strong>DEF:</strong> <span id="defesaJogador" class="text-info"></span></p>
            <p class="mb-2"><strong>R:</strong> <span id="ruindadeJogador" class="text-info"></span></p>
            <p class="mb-2"><strong>RV:</strong> <span id="revesJogador" class="text-info"></span></p>
            <p class="mb-2"><strong>ATK:</strong> <span id="ataqueJogador" class="text-info"></span></p>
            <p class="mb-2"><strong>TRF:</strong> <span id="transformacaoJogador" class="text-info">false</span></p>
            <p class="mb-2"><strong>Legenda: INV = Investimento/ FM = Fama/ DEF = Defesa/ R = Ruindade/ RV = Revés/ ATK = Ataque/ TRF = Transformação</strong> <span id="legenda" class="text-info"></span></p>
          </div>
        </div>

      
        <div id="endgameOverlay" style="display: none;">
          <img id="endButton" src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/trophy.gif" alt="trophy" style="position: fixed; left: 90px; top: 160px; z-index: 1;" onclick="mostrarMenuStatus()">
          <img src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/stars.gif" alt="stars" style="position: fixed;  left: -70px; top: 60px; ">
          <img src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/ods3.jpg" alt="ODS3" style="position: fixed;  left: 90px; bottom: 20px; width: 180px; height: auto;">
        </div>
      
     
<div id="startOverlay">
  <img id="startButton" src="/Baralho_Capital/imagensTelaInicial/startButton.gif" alt="Start Button" width="150" height="auto">
</div>

<!-- Caixa de opções -->
<div id="menuOverlay" class="menu-overlay">
  <div class="menu-options">
    <button onclick="pararMusica()">
      <img id="imagemMusica" src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/songTrue.png" alt="Ícone Opção 1">
      <span>Música</span>
    </button>
    <button onclick="mutarEfeitosSonoros()">
      <img id="efeitoSons" src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/speaking.png" alt="Ícone Opção 2">
      <span>Sons</span>
    </button>
    <button onclick="mostrarMenuStatus()">
      <img src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/bar graph.png" alt="Ícone Opção 4">
      <span>Status</span>
    </button>
  </div>
</div>

<img id="configurations" src="/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/options.png" style="display: block;" onclick="toggleMenu()">

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="/Baralho_Capital/Front_end/TelaJogo/scriptTelaJogo.js"></script>
<script src="/Baralho_Capital/Front_end/TelaJogo/app.js"></script>
<script src="/Baralho_Capital/Front_end/TelaJogo/playerCard.js"></script>
<script src="/Baralho_Capital/Back_end/TelaDoJogo/startJogo.js"></script>
<script src="/Baralho_Capital/Front_end/TelaJogo/miniGameFuga.js"></script>

<audio id="musica" src="/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/Demon_s-Crest-OST_-The-Infinite-Demon-.wav" preload="auto" loop></audio>


<script>

  ///////VARIAVEIS GLOBAIS SOBRE CARTAS///////
  var cartaJogadorRecente = 20
  var cartaBossRecente = 0
  var quantidadeHPJogador = 50
  var defendidoContraUmaPicadaSurpresa = false
  var defendidoContraUmaPicadaParalizante = false
  var tempoMissaoZerado = false
  //<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<//
  var alteracaoBossJaAconteceu = false

  var cronometroMinigameAtual = null

  var numeroCarta = 0
  var valorProduto = 0, idProduto = 0

  var faseDois = false
  var transicaoBoss = false
  var vidaBoss = 100

  function mostrarMenuStatus() {
  var statusMenu = document.getElementById('statusMenu');
  statusMenu.style.display = 'block'; 
}
 
  function fecharMenuStatus() {
    var statusMenu = document.getElementById('statusMenu');
    statusMenu.style.display = 'none';
  }

  function verificarBarraDeProgressoZerada() {
    // Obter o elemento da barra de progresso
    var barraDeProgresso = document.getElementById('bossHealthBar');

    // Obter o valor atual da barra de progresso
    var valorAtual = parseInt(barraDeProgresso.getAttribute('aria-valuenow'));

    // Verificar se a barra de progresso está zerada
    if (valorAtual === 0) {
        return true
        // Faça algo aqui se a barra de progresso estiver zerada
    } else {
        return false
        // Faça algo aqui se a barra de progresso não estiver zerada
    }
}


  
function alterarVidaBoss(porcentagem) {
  // Verifica se a porcentagem está dentro do intervalo válido (0-100)
  if(vidaBoss <= 50 && alteracaoBossJaAconteceu === false){
    console.log('entrou no alterarVidaBoss')
    alteracaoBossJaAconteceu = true
    alterarFaseBoss()
  }
  if (porcentagem >= 0 && porcentagem <= 100) {
    // Seleciona a barra de vida do boss pelo ID
    var bossHealthBar = document.getElementById('bossHealthBar');
    // Define a largura da barra de progresso com base na porcentagem fornecida
    bossHealthBar.style.width = porcentagem + '%';
    // Atualiza o valor da porcentagem atual (para acessibilidade)
    bossHealthBar.setAttribute('aria-valuenow', porcentagem);

    //vidaBoss = porcentagem * vidaTotalBoss / 100; // Suponha que vidaTotalBoss seja a vida máxima do boss
  } else {
    console.error('Porcentagem inválida. A porcentagem deve estar entre 0 e 100.');
  }

}

function alterarFaseBoss() {
    var audioElement = document.getElementById('musica');
    var raivaIcone = document.getElementById('raiva');
    var mosquito = document.getElementById('animatedImage');
    var fundo = document.querySelector('.black-bg');

    

    raivaIcone.style.display = "block";
    var risadaMosquito = new Audio('/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/mosquito-laugh.wav');
    risadaMosquito.play(); // Inicia a música
    // Altera a música
    audioElement.src = "/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/Demon_s-Crest-OST_-Cursed-Towers-.wav";
    // Recarrega e inicia a nova música
    audioElement.load();
    audioElement.play();

    var transicao = document.querySelector(".overlay-transition-boss");
    transicao.style.display = "block";
 

    // Adiciona a classe 'show' após 2 segundos
    setTimeout(function() {
        $(".overlay-transition-boss").addClass("show");
      setTimeout(function(){
            mosquito.src = '/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/mosquitao.png';
            fundo.style.backgroundImage = 'url("/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/FireBackground.gif")';
            raivaIcone.style.display = "none";
      }, 1000);
        // Remove a classe 'show' após 3 segundos adicionais
        setTimeout(function() {
            
            $(".overlay-transition-boss").removeClass("show");
            transicao.style.display = "none";
            mosquito.style.top = "50px";
            mosquito.style.width = "550px";
            faseDois = true
            reproduzirEfeitoMosquitaoAparicao()
        }, 3000);
    }, 2800);
}




var musica = document.getElementById('musica');
var musicaTocando = true;
var imagemMusica = document.getElementById('imagemMusica');

var mutado = document.getElementById('efeitoSons');
var efeitoSonoro = true;

var maximoCartasDevolvidas = 2

function pararMusica() {
    if (musicaTocando || tempoMissaoZerado === true) {
        musica.pause(); // Pausa a música se estiver tocando
        musicaTocando = false;
        imagemMusica.src = "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/songFalse.png";
    } else {
        musica.play(); // Toca a música se estiver parada
        musicaTocando = true;
        imagemMusica.src = "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/songTrue.png";
    }
}

function mutarEfeitosSonoros(){
  if (efeitoSonoro) {
    efeitoSonoro = false;
    mutado.src = "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/muted.png";
    } else {
        efeitoSonoro = true;
        mutado.src = "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/speaking.png";
    }
}

var efeitosSonorosFaseUm = [
    "/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/Mosquito Laugh 1.mp3",
    "/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/Mosquito Laugh 2.mp3",
    "/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/Mosquito Laugh 3.mp3",
    "/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/Mosquito - Sound Effect.mp3"
];

var efeitosSonorosFaseDois = [
    "/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/RisadaFaseDois_1.wav",
    "/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/RisadaFaseDois_2.wav",
    "/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/RisadaFaseDois_3.wav",
    "/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/Mosquito - Sound Effect.mp3"
];

function tocarEfeitoRisadaMosquitoAleatorio() {
  if(efeitoSonoro){
    if(faseDois === false){
      efeitosSonoros = efeitosSonorosFaseUm
    }else{
      efeitosSonoros = efeitosSonorosFaseDois
    }
    var indice = Math.floor(Math.random() * 4); // Gera um número aleatório entre 0 e 2
    var audio = new Audio(efeitosSonoros[indice]);
    audio.play();
  }
}

function exibirImagemTemporizada() {
    var imagem = document.getElementById('risada');
    imagem.style.display = 'block'; // Exibe a imagem

    // Define um temporizador para ocultar a imagem após alguns segundos (por exemplo, 3 segundos)
    setTimeout(function() {
        imagem.style.display = 'none'; // Oculta a imagem após 3 segundos
    }, 2000); // Tempo em milissegundos (3 segundos = 3000 milissegundos)
}

function danoBoss() {
  tocarEfeitoSoco()
  var mosquitoFaseUm = [
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoDengueFerido.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoDengue.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoDengueFerido.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoDengue.png"
    ];

  var mosquitoFaseDois = [
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/mosquitaoFerido.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/mosquitao.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/mosquitaoFerido.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/mosquitao.png"
    ];
  if(faseDois === false){
    boss = mosquitoFaseUm
  } else{
    boss = mosquitoFaseDois
  }
 
    var index = 0;
    var animatedImage = document.getElementById('animatedImage');

    // Define um temporizador para alternar as imagens a cada 1 segundo
    var intervalo = setInterval(function() {
        animatedImage.src = boss[index]; // Altera a imagem para a próxima na sequência

        index++; // Incrementa o índice para a próxima imagem

        // Se chegou ao final do array, reinicia do início
        if (index >= boss.length) {
            index = 0;
        }
    }, 100); 

    // Define outro temporizador para parar a alternância após 4 segundos (4 imagens x 1 segundo cada)
    setTimeout(function() {
        clearInterval(intervalo); // Para o intervalo de alternância
    
    
    if (animatedImage.src.endsWith('MosquitoDengueFerido.png')) {
            animatedImage.src = '/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoDengue.png';
        } else if (animatedImage.src.endsWith('mosquitaoFerido.png')) {
            animatedImage.src = '/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/mosquitao.png';
        }
      }, 600); 
}

function choqueDanoBoss() {
  reproduzirEfeitoSomChoque()
  var mosquitoFaseUm = [
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoDengueChoque.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoDengue.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoDengueChoque.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoDengue.png"
    ];

  var mosquitoFaseDois = [
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/mosquitaoChoque.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/mosquitao.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/mosquitaoChoque.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/mosquitao.png"
    ];
  if(faseDois === false){
    boss = mosquitoFaseUm
  } else{
    boss = mosquitoFaseDois
  }
 
    var index = 0;
    var animatedImage = document.getElementById('animatedImage');

    // Define um temporizador para alternar as imagens a cada 1 segundo
    var intervalo = setInterval(function() {
        animatedImage.src = boss[index]; // Altera a imagem para a próxima na sequência

        index++; // Incrementa o índice para a próxima imagem

        // Se chegou ao final do array, reinicia do início
        if (index >= boss.length) {
            index = 0;
        }
    }, 100); 

    // Define outro temporizador para parar a alternância após 4 segundos (4 imagens x 1 segundo cada)
    setTimeout(function() {
        clearInterval(intervalo); // Para o intervalo de alternância
    
    
    if (animatedImage.src.endsWith('MosquitoDengueChoque.png')) {
            animatedImage.src = '/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoDengue.png';
        } else if (animatedImage.src.endsWith('mosquitaoChoque.png')) {
            animatedImage.src = '/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/mosquitao.png';
        }
      }, 3500); 
}


function fumacaDanoBoss() {
  reproduzirEfeitoSomMosquitoTosse()
  var mosquitoFaseUm = [
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoDengueTossindo.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoDengue.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoDengueTossindo.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoDengue.png"
    ];

  var mosquitoFaseDois = [
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/mosquitaoTossindo.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/mosquitao.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/mosquitaoTossindo.png",
        "/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/mosquitao.png"
    ];
  if(faseDois === false){
    boss = mosquitoFaseUm
  } else{
    boss = mosquitoFaseDois
  }
 
    var index = 0;
    var animatedImage = document.getElementById('animatedImage');

    // Define um temporizador para alternar as imagens a cada 1 segundo
    var intervalo = setInterval(function() {
        animatedImage.src = boss[index]; // Altera a imagem para a próxima na sequência

        index++; // Incrementa o índice para a próxima imagem

        // Se chegou ao final do array, reinicia do início
        if (index >= boss.length) {
            index = 0;
        }
    }, 100); 

    // Define outro temporizador para parar a alternância após 4 segundos (4 imagens x 1 segundo cada)
    setTimeout(function() {
        clearInterval(intervalo); // Para o intervalo de alternância
    
    
    if (animatedImage.src.endsWith('MosquitoDengueTossindo.png')) {
            animatedImage.src = '/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/MosquitoDengue.png';
        } else if (animatedImage.src.endsWith('mosquitaoTossindo.png')) {
            animatedImage.src = '/Baralho_Capital/Front_end/TelaJogo/ImagensTelaJogo/mosquitao.png';
        }
      }, 3500); 
}


function ocultarMaoJogador() {
    var maoJogador = document.getElementById('maoJogador');
    var baralho = document.getElementById('imagemBaralho');
    maoJogador.style.pointerEvents = 'none';
    baralho.style.pointerEvents = 'none';

    maoJogador.classList.add("disabled");
    baralho.classList.add("disabled");
  }

  function retornarAoEstadoNormal() {
    var maoJogador = document.getElementById('maoJogador');
    var baralho = document.getElementById('imagemBaralho');

    maoJogador.style.pointerEvents = 'auto';
    baralho.style.pointerEvents = 'auto';

    maoJogador.classList.remove("disabled");
    baralho.classList.remove("disabled");
}

function visualizacaoCartaBoss(){
        escolhaDoBoss()
        
        var imgElement = document.createElement('img');
        imgElement.src = selecionarCaminhoImagem(cartaBossRecente);

        var cartaBoss = document.getElementById('opponentCardPreviewOverlay');
        cartaBoss.classList.remove("d-none");
        cartaBoss.appendChild(imgElement);
}

function fecharvisualizacaoCartaBoss(){
    var cartaBoss = document.getElementById('opponentCardPreviewOverlay');
   
    Array.from(cartaBoss.children).forEach(child => {
        if (child.id !== 'botaoFechar') {
            child.remove();
        }
    });

    cartaBoss.classList.add("d-none");

    verificarCartaBoss(cartaBossRecente)
    
}

var cronometroAtivo = false; // Variável de controle para o cronômetro

function iniciarCronometro(tempoRecebido) {
    var elementoTempo = document.getElementById("tempo-restante-div");
    elementoTempo.classList.remove("d-none");
    
    var tempoRestante = tempoRecebido; // Tempo inicial em segundos

    cronometroAtivo = true; // Define o cronômetro como ativo
    
    var cronometro = setInterval(function() {
        // Atualiza o tempo restante na tela
        document.getElementById("tempo-restante").textContent = "Aguardando Adversário: " + tempoRestante + " segundos...";
        
        // Verifica se o tempo acabou ou se o cronômetro foi interrompido
        if (tempoRestante <= 0 || !cronometroAtivo) {
            clearInterval(cronometro); // Para o cronômetro
            elementoTempo.classList.add("d-none");
            document.getElementById("tempo-restante").textContent = "Aguardando Adversário: 16 segundos..." 
            return;
        }
        
        // Decrementa o tempo restante
        tempoRestante--;
    }, 1000);
}

function iniciarCronometroMinigame(tempoRecebido) {
    var elementoTempo = document.getElementById("tempo-minigame-div");
    elementoTempo.classList.remove("d-none");
    
    var tempoRestante = tempoRecebido; // Tempo inicial em segundos

    cronometroAtivo = true; // Define o cronômetro como ativo
    
    var cronometro = setInterval(function() {
        // Atualiza o tempo restante na tela
        document.getElementById("tempo-minigame").textContent = "Tempo restante: " + tempoRestante + "s...";
        
        // Verifica se o tempo acabou ou se o cronômetro foi interrompido
        if (tempoRestante <= 0 || !cronometroAtivo) {
            clearInterval(cronometro); // Para o cronômetro
            elementoTempo.classList.add("d-none");
            document.getElementById("tempo-minigame").textContent = "Tempo restante: 16s..." 
            finalizarMinigameFugaVitorioso()
            return;
        }
        
        // Decrementa o tempo restante
        tempoRestante--;
    }, 1000);
}

function iniciarCronometroTempoMissao(tempoRecebido) {
    var elementoTempo = document.getElementById("tempo-missao-div");
    elementoTempo.classList.remove("d-none");
    
    var tempoRestante = tempoRecebido; // Tempo inicial em segundos

    
    var cronometro = setInterval(function() {
        // Atualiza o tempo restante na tela com formatação
        document.getElementById("tempo-missao").textContent = formatarTempo(tempoRestante);
        
        // Verifica se o tempo acabou ou se o cronômetro foi interrompido
        if (tempoRestante <= 0) {
            clearInterval(cronometro); // Para o cronômetro
            elementoTempo.classList.add("d-none");
            tempoMissaoZerado = true;
            terminarJogo()
            return;
        }
        
        // Decrementa o tempo restante
        tempoRestante--;
    }, 1000);
}

function formatarTempo(segundos) {
    var minutos = Math.floor(segundos / 60);
    var segundos = segundos % 60;
    return (minutos < 10 ? "0" : "") + minutos + ":" + (segundos < 10 ? "0" : "") + segundos;
}


var efeitosSonoroSoco = [
    "/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/Soco 1.mp3",
    "/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/Soco 2.mp3"
];

function tocarEfeitoSoco() {
  if(efeitosSonoroSoco){
    var indice = Math.floor(Math.random() * 2); 
    var audio = new Audio(efeitosSonoroSoco[indice]);
    audio.play();
  }
}

function reproduzirEfeitoMinigameStart() {
    var audio = new Audio('/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/mus_sfx_star.wav');
    audio.play();
}
function reproduzirEfeitoMinigameOverLoser() {
    var audio = new Audio('/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/snd_fall2.wav');
    audio.play();
}

function reproduzirEfeitoMinigameVictory() {
    var audio = new Audio('/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/snd_levelup.wav');
    audio.play();
}


function reproduzirEfeitoMosquitaoAparicao() {
    var audio = new Audio('/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/mus_f_orchhit_l.wav');
    audio.play();
}

function reproduzirEfeitoCartaEspecial() {
    var audio = new Audio('/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/mus_create.wav');
    audio.play();
}

function reproduzirEfeitoSomCoracao() {
    var audio = new Audio('/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/Fast Heart Beat - Sound Effect.mp3');
    audio.play();
    audio.volume = 1; 
}

function reproduzirEfeitoSomChoque() {
    var audio = new Audio('/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/choque.mp3');
    audio.play();
    audio.volume = 1; 
}

function reproduzirEfeitoDerrotaJogador() {
    var audio = new Audio('/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/Darkest Dungeon - Death door bell.mp3');
    audio.play();
    audio.volume = 1; 
}

function reproduzirEfeitoSomMosquitoTosse() {
    var audio = new Audio('/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/MosquitoTossindo.mp3');
    audio.play();
    audio.volume = 1; 
}

var audioLoucura1 = new Audio('/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/Mosquito Flying Buzz Sound Effect.mp3');
audioLoucura1.loop = true; 
audioLoucura1.volume = 0.7; 

var audioLoucura2 = new Audio('/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/mus_disturbing.wav');
audioLoucura2.loop = true; 
audioLoucura2.volume = 0.5; 

function reproduzirEfeitoZumbidoLoucura() {
    audioLoucura1.play();
    audioLoucura2.play();
}

function pararEfeitoZumbidoLoucura() {
    audioLoucura1.pause();
    audioLoucura1.currentTime = 0;

    audioLoucura2.pause();
    audioLoucura2.currentTime = 0;
}


function zumbidoLoucura() {
  reproduzirEfeitoZumbidoLoucura()
  notasMosquito = document.getElementById('mosquitoNotes').style.display = 'block'; 
  document.getElementById('overlayLoucura').style.display = 'block'; 

  setTimeout(pararZumbidoLoucura, 15000);
}

function pararZumbidoLoucura() {
  notasMosquito = document.getElementById('mosquitoNotes').style.display = 'none'; 
  document.getElementById('overlayLoucura').style.display = 'none';
  pararEfeitoZumbidoLoucura()
}

function curarVidaJogador(numero){
  if(quantidadeHPJogador < 50){
    if(numero === 20){
      if(quantidadeHPJogador + numero < 50){
        quantidadeHPJogador += numero
        if(quantidadeHPJogador === 30){
          valorCura = 0.4
        }
      } else{
        quantidadeHPJogador = 50
        valorCura = 0
      }
    } else if (numero === 50){
      quantidadeHPJogador = 50
      valorCura = 0
    }
    ajustarOpacidadeVida(valorCura)
  } else{
    return
  }
}

function diminuirVidaJogador(){
  quantidadeHPJogador -= 20
 if(quantidadeHPJogador > 0){
  if(quantidadeHPJogador === 30){
    ajustarOpacidadeVida(0.4)
  } else if(quantidadeHPJogador === 10){
    ajustarOpacidadeVida(0.7)
  }
 } else{
  ajustarOpacidadeVida(1)
  terminarJogo()
 }
}

function ajustarOpacidadeVida(opacidade) {
    var vidaJogadorOverlay = document.getElementById('vidaJogadorOverlay');
    if (opacidade < 0) opacidade = 0; // Garante que a opacidade não seja menor que 0
    if (opacidade > 1) opacidade = 1; // Garante que a opacidade não seja maior que 1
    vidaJogadorOverlay.style.opacity = opacidade;
}

document.getElementById('imagemDerrota').addEventListener('click', function() {
    window.location.href = '/Baralho_Capital/Front_end/TelaMissoes/mapaMissoes.html';
});



function iniciarSusto() {
    var sustoOverlay = document.getElementById('sustoOverlay');
    var imagemSusto = document.getElementById('imagemSusto');
    var fundoPreto = document.getElementById('fundoPreto');
    pararMusica()
    var audioSusto = new Audio('/Baralho_Capital/Back_end/TelaDoJogo/musicasEEfeitos/MosquitoAtaqueMaisLeve.mp3');
    audioSusto.volume = 0.2; 
    audioSusto.play();
    // Mostrar a overlay e iniciar a animação
    sustoOverlay.style.display = 'block';
    setTimeout(() => {
        sustoOverlay.classList.add('active');
    }, 100); // Pequeno delay para garantir transição

    // Após 4 segundos, ocultar tudo e resetar a animação
    setTimeout(() => {
        sustoOverlay.classList.remove('active');
        setTimeout(() => {
            sustoOverlay.style.display = 'none';
        }, 3000); // Tempo para a transição de volta ao normal
        pararMusica()
        reproduzirEfeitoSomCoracao()
    }, 6000); // Duração total da animação antes do reset
}






function checkOrientation() {
  const contentElement = document.querySelector('.content');
  const warningElement = document.querySelector('.landscape-warning');

  if (contentElement && warningElement) {
    if (window.innerHeight < window.innerWidth) {
      contentElement.style.display = 'none';
      warningElement.style.display = 'block';
    } else {
      contentElement.style.display = 'block';
      warningElement.style.display = 'none';
    }
  } else {
    console.error('Elementos não encontrados.');
  }
}

window.addEventListener('resize', checkOrientation);
window.addEventListener('load', checkOrientation);
window.addEventListener('orientationchange', checkOrientation);

  </script>
  
</body>
</html>
